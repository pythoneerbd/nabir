{% extends 'blog/base.html' %}
{% load static %}
{% block title %} update {{ request.user.username }} profile {% endblock %}

{% block content %}

<!--  BEGIN MAIN CONTAINER  -->
<div class="main-container sidebar-closed sbar-open" id="container">
    <div class="overlay"></div>
    <!--  BEGIN CONTENT PART  -->
    <div id="content" class="main-content">
        <div class="layout-px-spacing">
            <div class="row mt-n4 ">
                <div class="col-xl-4 col-lg-6 col-md-6 mb-4 layout-px-spacing">
                    <div class="card b-l-card-1 h-auto"
                         style="-webkit-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14), 0 1px 18px 0 rgba(0,0,0,.12), 0 3px 5px -1px rgba(0,0,0,.2); -moz-box-shadow: 0 6px 10px 0 rgba(0,0,0,.14), 0 1px 18px 0 rgba(0,0,0,.12), 0 3px 5px -1px rgba(0,0,0,.2); box-shadow: 0 6px 10px 0 rgba(0,0,0,.14), 0 1px 18px 0 rgba(0,0,0,.12), 0 3px 5px -1px rgba(0,0,0,.2); ">
                        <div class="ml-3 mr-3 mt-3 user" align="center">
                            <img src="{{ user.image.url }}" height="100" width="100"
                                 class="rounded-circle border" alt="Card image cap">
                            <h5 class="card-title mt-2 ">{{ account_form.name.value }}</h5>
                        </div>
                        <div class="card-body">
                            <table class="table table-borderless">
                                <tbody>
                                <tr>
                                    <td class="">Date of Birth</td>
                                    <td>{{ account_form.dob.value }}</td>
                                </tr>
                                <tr>
                                    <td class="">Username</td>
                                    <td>{{ account_form.username.value }}</td>
                                </tr>
                                <tr>
                                    <td class="">Email</td>
                                    <td>{{ account_form.email.value }}</td>
                                </tr>
                                <tr>
                                    <td class="">Phone No</td>
                                    <td>{{ account_form.phone_number.value }}</td>
                                </tr>
                                <tr>
                                    <td class="">Address</td>
                                    <td>{{ account_form.address.value }}</td>
                                </tr>
                                <tr>
                                    <td class="">Bio</td>
                                    <td>{{ account_form.bio.value }}</td>
                                </tr>
                            </table>

                        </div>
                        {{ account_form.image.lable }}
                        <div class="form mb-3 align-bottom " align="center">
                            <a href="{% url 'accounts:change_password' %}" class="btn btn-primary mb-4">Change Password</a>
                        </div>
                    </div>
                </div>

                <div class="col-xl-8 col-lg-6 col-md-6 col-sm-12 col-16 h-auto" style="margin-bottom:24px;">
                    <div class=" widget " style="border-radius: 6px;">
                        <div class="widget-header">
                            <div class="row">
                                <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                                    <h4 style="display: inline-block;float: left;">Update Profile</h4>

                                </div>
                            </div>
                        </div>
                        <div class="widget-content widget-content-area h-auto">
                            <form method="post" enctype="multipart/form-data">
                                {% csrf_token %}
                                {% if account_form.non_field_errors %}
                                    <div class="alert alert-danger" role="alert">
                                        {{ account_form.non_field_errors.as_text }}
                                    </div>
                                {% endif %}
                                {% if success_message %}
                                    <div class="alert alert-success" role="alert">
                                        {{ success_message }}
                                    </div>
                                {% endif %}

                                <div class="form-row mb-2">
                                    <div class="form-group col-md-6">
                                        <label for="id_name">Name</label>
                                        <input type="text" name="name" maxlength="50" required id="id_name"
                                               class="form-control" value="{{ account_form.name.value }}">

                                        {% if account_form.name.help_text %}
                                            <small>{{ account_form.name.help_text }}</small>
                                        {% endif %}
                                        {% if account_form.name.errors %}
                                            <div class="alert alert-danger" role="alert">
                                                {{ account_form.name.errors.as_text }}
                                            </div>
                                        {% endif %}

                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="id_dob">Date of Birth</label>
                                        <input id="id_dob" name="dob" type="date" class="form-control"
                                               value="{{ account_form.dob.value|date:'Y-m-d' }}"> # TODO: change image
                                        donot show value front end

                                        {% if account_form.dob.help_text %}
                                            <small>{{ account_form.dob.help_text }}</small>
                                        {% endif %}
                                        {% if account_form.dob.errors %}
                                            <div class="alert alert-danger" role="alert">
                                                {{ account_form.dob.errors.as_text }}
                                            </div>
                                        {% endif %}

                                    </div>
                                </div>

                                <div class="form-row mb-2">
                                    <div class="form-group col-md-6">
                                        <label for="email">Email</label>
                                        <input id="email" name="email" type="text" class="form-control"
                                               value="{{ account_form.email.value }}">


                                        {% if account_form.email.help_text %}
                                            <small>{{ account_form.email.help_text }}</small>
                                        {% endif %}
                                        {% if account_form.email.errors %}
                                            <div class="alert alert-danger" role="alert">
                                                {{ account_form.email.errors.as_text }}
                                            </div>
                                        {% endif %}

                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="username">Username</label>
                                        <input id="username" name="username" type="text" class="form-control"
                                               value="{{ account_form.username.value }}">

                                        {% if account_form.username.help_text %}
                                            <small>{{ account_form.username.help_text }}</small>
                                        {% endif %}
                                        {% if account_form.username.errors %}
                                            <div class="alert alert-danger" role="alert">
                                                {{ account_form.username.errors.as_text }}
                                            </div>
                                        {% endif %}

                                    </div>
                                </div>


                                <div class="form-row mb-2">
                                    <div class="form-group col-md-6">
                                        <label for="id_image">Address</label>
                                        <textarea id="id_address" name="address" rows="3" cols="50" class="form-control"
                                                  maxlength="1024">{{ account_form.address.value }}</textarea>

                                        {% if account_form.address.help_text %}
                                            <small>{{ account_form.address.help_text }}</small>
                                        {% endif %}
                                        {% if account_form.address.errors %}
                                            <div class="alert alert-danger" role="alert">
                                                {{ account_form.address.errors.as_text }}
                                            </div>
                                        {% endif %}

                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="id_phone_number">Phone No</label>
                                        <input type="tel" name="phone_number" maxlength="128" id="id_phone_number"
                                               class="form-control"
                                               value="{{ account_form.phone_number.value }}">

                                        {% if account_form.phone_number.help_text %}
                                            <small>{{ account_form.phone_number.help_text }}</small>
                                        {% endif %}
                                        {% if account_form.phone_number.errors %}
                                            <div class="alert alert-danger" role="alert">
                                                {{ account_form.phone_number.errors.as_text }}
                                            </div>
                                        {% endif %}

                                    </div>
                                </div>

                                <div class="form-group mb-2">
                                    <label for="id_image">Bio</label>
                                    <textarea id="id_bio" name="bio" rows="3" cols="50" class="form-control"
                                              maxlength="1000">{{ account_form.bio.value }}</textarea>

                                    {% if account_form.bio.help_text %}
                                        <small>{{ account_form.bio.help_text }}</small>
                                    {% endif %}
                                    {% if account_form.bio.errors %}
                                        <div class="alert alert-danger" role="alert">
                                            {{ account_form.bio.errors.as_text }}
                                        </div>
                                    {% endif %}
                                </div>
                                <div class="form-group mb-4">
                                    <label for="id_image">Change Photo</label>
                                    <input type="file" name="image" accept="image/*" class="form-control-file"
                                           id="id_image">

                                    {% if account_form.image.help_text %}
                                        <small>{{ account_form.image.help_text }}</small>
                                    {% endif %}
                                    {% if account_form.image.errors %}
                                        <div class="alert alert-danger" role="alert">
                                            {{ account_form.image.errors.as_text }}
                                        </div>
                                    {% endif %}
                                </div>

                                <!--{{ account_form.image}}-->
                                <!--
                                <div class="form-row mb-4">
                                    <div class="form-group col-md-6">
                                        <label for="inputCity">City</label>
                                        <input type="text" class="form-control" id="inputCity">
                                    </div>
                                    <div class="form-group col-md-4">
                                        <label for="inputState">State</label>
                                        <select id="inputState" class="form-control">
                                            <option selected="">Choose...</option>
                                            <option>...</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-2">
                                        <label for="inputZip">Zip</label>
                                        <input type="text" class="form-control" id="inputZip">
                                    </div>
                                  </div>
                                    -->

                                <button type="submit" class="btn btn-primary mt-3">Update</button>

                            </form>
                        </div>
                    </div>
                </div>


                <!--  END CONTENT PART  -->

            </div>

        </div>
    </div>
</div>
<!-- END MAIN CONTAINER -->
<style>
    .sidebar-closed .layout-px-spacing {
        padding: 0 20px !important;
}

</style>
{% endblock %}

<script>
    $(document).ready(function () {
        App.init();
    });
</script>
